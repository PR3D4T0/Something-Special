<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Something Special ‚ù§Ô∏è Valentine's Movie</title>
    <style>
        /* ===== RESET & VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --valentine-pink: #FFB6C1;
            --valentine-dark-pink: #FF69B4;
            --valentine-red: #FF1493;
            --valentine-soft-pink: #FFE4E1;
        }

        /* ===== CINEMATIC BASE - Full Screen 9:16 ===== */
        body {
            background: #000;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }

        html {
            height: -webkit-fill-available;
        }

        #movie-container {
            position: relative;
            width: 100%;
            max-width: 405px;
            height: 100vh;
            height: -webkit-fill-available;
            max-height: 720px;
            background: #FF69B4;
            overflow: hidden;
            aspect-ratio: 9/16;
        }

        @supports (height: 100dvh) {
            #movie-container {
                height: 100dvh;
            }
        }

        /* ===== CINEMATIC OVERLAYS ===== */
        .film-grain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-radial-gradient(circle at 50% 50%, rgba(255,192,203,0.05) 0px, transparent 1px);
            pointer-events: none;
            z-index: 50;
            opacity: 0.15;
            mix-blend-mode: overlay;
        }

        .vignette {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 100px rgba(255,20,147,0.2);
            pointer-events: none;
            z-index: 40;
        }

        /* ===== SCENES ===== */
        .scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease;
            background: linear-gradient(180deg, var(--bg-start) 0%, var(--bg-end) 100%);
            will-change: opacity;
        }

        .scene.active {
            opacity: 1;
            visibility: visible;
        }

        /* Scene backgrounds */
        .scene[data-scene="1"] { --bg-start: #FFB6C1; --bg-end: #FF69B4; }
        .scene[data-scene="2"] { --bg-start: #FF69B4; --bg-end: #FF1493; }
        .scene[data-scene="3"] { --bg-start: #FF1493; --bg-end: #DA70D6; }
        .scene[data-scene="4"] { --bg-start: #DA70D6; --bg-end: #FFB6C1; }
        .scene[data-scene="5"] { --bg-start: #FFB6C1; --bg-end: #FF69B4; }
        .scene[data-scene="6"] { --bg-start: #2C1A4D; --bg-end: #FF1493; }
        .scene[data-scene="7"] { --bg-start: #1a0f2e; --bg-end: #FF1493; }
        .scene[data-scene="8"] { --bg-start: #FF1493; --bg-end: #FFD700; }

        /* ===== PARALLAX LAYERS (Optimized) ===== */
        .parallax-bg {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 30%;
            background: linear-gradient(180deg, transparent 0%, rgba(255,105,180,0.2) 100%);
            transform: translate3d(0, 0, 0);
            will-change: transform;
            pointer-events: none;
        }

        .parallax-floor {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 20%;
            background: repeating-linear-gradient(90deg, rgba(255,255,255,0.15) 0px, rgba(255,255,255,0.15) 20px, transparent 20px, transparent 40px);
            transform: translate3d(0, 0, 0);
            will-change: transform;
            pointer-events: none;
        }

        /* ===== CHARACTERS (Optimized) ===== */
        .character {
            position: absolute;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%) translate3d(0, 0, 0);
            height: 28vh;
            max-height: 200px;
            z-index: 10;
            filter: drop-shadow(0 10px 15px rgba(255,20,147,0.3));
            pointer-events: none;
        }

        .character img {
            height: 100%;
            width: auto;
            object-fit: contain;
            pointer-events: none;
        }

        /* ===== DIALOGUE BOXES (Optimized) ===== */
        .dialogue {
            position: absolute;
            top: 12%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-radius: 30px;
            padding: 10px 20px;
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            white-space: nowrap;
            z-index: 30;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 18px;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            pointer-events: none;
        }

        .dialogue.show {
            opacity: 1;
        }

        .dialogue::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid rgba(255,255,255,0.2);
        }

        /* ===== QR CODE SECTION (Optimized) ===== */
        .qr-container {
            position: absolute;
            top: 32%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 30;
            animation: float 2s ease-in-out infinite;
        }

        .qr-box {
            width: 100px;
            height: 100px;
            background: white;
            padding: 6px;
            border-radius: 15px;
            border: 2px solid #FF1493;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .qr-box:active {
            transform: scale(0.95);
        }

        .qr-box svg {
            width: 100%;
            height: 100%;
        }

        @keyframes float {
            0%, 100% { transform: translate(-50%, -50%); }
            50% { transform: translate(-50%, -55%); }
        }

        /* ===== PHONE SCANNER UI (Optimized) ===== */
        .phone-scanner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            max-width: 300px;
            background: rgba(20, 10, 30, 0.95);
            backdrop-filter: blur(8px);
            border-radius: 30px;
            border: 2px solid #FF1493;
            z-index: 200;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            animation: phoneAppear 0.3s ease;
        }

        @keyframes phoneAppear {
            0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .phone-header {
            background: #FF1493;
            padding: 12px;
            text-align: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        .scanner-area {
            position: relative;
            height: 200px;
            background: #2a1a3a;
            margin: 15px;
            border-radius: 20px;
            overflow: hidden;
        }

        .scanning-qr {
            width: 100px;
            height: 100px;
            background: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 10px;
            padding: 5px;
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #FF1493;
            animation: scanVertical 1.5s linear infinite;
        }

        @keyframes scanVertical {
            0% { top: 0; }
            100% { top: 100%; }
        }

        .scanning-text {
            color: white;
            font-size: 16px;
            text-align: center;
            margin: 10px;
            opacity: 0.8;
        }

        /* ===== HACKER MASK & QUIZ (Optimized) ===== */
        .hacker-mask {
            position: absolute;
            top: 22%;
            left: 50%;
            transform: translateX(-50%);
            width: 130px;
            height: 130px;
            z-index: 100;
            filter: drop-shadow(0 0 20px #FF1493);
            animation: glitch 2s infinite;
        }

        @keyframes glitch {
            0%, 100% { transform: translateX(-50%); }
            95% { transform: translateX(-52%); }
            97% { transform: translateX(-48%); }
        }

        .quiz-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            max-width: 260px;
            background: rgba(255,240,245,0.98);
            border: 2px solid #FF1493;
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            z-index: 100;
        }

        .question-text {
            color: #FF1493;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .quiz-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .quiz-btn {
            padding: 8px 20px;
            font-size: 16px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s ease;
            min-width: 80px;
        }

        #yes-btn {
            background: #FF1493;
            color: white;
        }

        #yes-btn:active {
            transform: scale(0.95);
        }

        #no-btn {
            background: #FFB6C1;
            color: #FF1493;
            position: relative;
            transition: all 0.1s ease;
        }

        /* ===== ROSE PETAL RAIN (Optimized) ===== */
        .petal-rain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 200;
        }

        .petal {
            position: absolute;
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10,2 Q8,0 5,3 Q3,6 7,10 Q10,13 13,10 Q17,6 15,3 Q12,0 10,2 Z" fill="%23FF69B4"/></svg>') no-repeat center/contain;
            animation: fall linear forwards;
            filter: drop-shadow(0 0 5px #FF69B4);
        }

        @keyframes fall {
            from { transform: translateY(-10%) rotate(0deg); opacity: 1; }
            to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* ===== EXPLOSION EFFECT (Optimized) ===== */
        .explosion {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, #FF1493, #FF69B4);
            z-index: 180;
            animation: explode 0.8s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% { width: 0; height: 0; opacity: 0.8; }
            100% { width: 600px; height: 600px; opacity: 0; }
        }

        /* ===== TEDDY BEAR FINALE ===== */
        .teddy-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 190;
            animation: float 3s ease-in-out infinite;
        }

        .teddy-container img {
            width: 140px;
            height: auto;
            filter: drop-shadow(0 15px 25px rgba(255,20,147,0.5));
        }

        .final-message {
            color: white;
            font-size: 22px;
            font-weight: bold;
            text-shadow: 0 0 20px #FF1493;
            margin-top: 10px;
        }

        .final-submessage {
            color: #FFE4E1;
            font-size: 16px;
            margin-top: 5px;
        }

        /* ===== NAVIGATION BUTTONS ===== */
        .nav-controls {
            position: absolute;
            bottom: 15px;
            right: 15px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(145deg, #FF1493, #FF69B4);
            border: 2px solid white;
            color: white;
            font-size: 22px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.1s ease;
            -webkit-tap-highlight-color: transparent;
        }

        .nav-btn:active {
            transform: scale(0.9);
        }

        /* Audio controls */
        .audio-control {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 1000;
        }

        #music-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(4px);
            border: 2px solid white;
            color: white;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        #music-toggle:active {
            transform: scale(0.9);
        }

        /* Prevent scrolling */
        body {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }

        /* Optimize animations */
        .moving {
            will-change: transform;
        }
    </style>
</head>
<body>
    <div id="movie-container">
        <!-- Audio Element -->
        <audio id="bg-music" loop preload="auto">
            <source src="roman.mp3" type="audio/mp3">
        </audio>

        <!-- Cinematic Overlays -->
        <div class="film-grain"></div>
        <div class="vignette"></div>

        <!-- Audio Control -->
        <div class="audio-control">
            <div id="music-toggle">üîä</div>
        </div>

        <!-- Navigation Buttons -->
        <div class="nav-controls">
            <div class="nav-btn" id="prev-scene">‚Üê</div>
            <div class="nav-btn" id="next-scene">‚Üí</div>
        </div>

        <!-- SCENE 1: The Wave -->
        <div class="scene active" data-scene="1" id="scene1">
            <div class="parallax-bg" id="parallax1"></div>
            <div class="parallax-floor" id="floor1"></div>
            <div class="character" id="char1">
                <img src="boy_bike_wave.png" alt="Boy" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2280%22%20height%3D%2280%22%3E%3Ccircle%20cx%3D%2240%22%20cy%3D%2240%22%20r%3D%2230%22%20fill%3D%22%23FF1493%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="dialogue show" id="dialogue1">Hey beautiful! Coming to pick you up! üíï</div>
        </div>

        <!-- SCENE 2: Solo Ride -->
        <div class="scene" data-scene="2" id="scene2">
            <div class="parallax-bg"></div>
            <div class="parallax-floor"></div>
            <div class="character moving" id="char2">
                <img src="bike_solo.png" alt="Boy riding" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2280%22%20height%3D%2280%22%3E%3Ccircle%20cx%3D%2240%22%20cy%3D%2240%22%20r%3D%2230%22%20fill%3D%22%23FF1493%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="dialogue" id="dialogue2">Can't wait to see you! üíñ</div>
        </div>

        <!-- SCENE 3: The Pickup -->
        <div class="scene" data-scene="3" id="scene3">
            <div class="parallax-bg"></div>
            <div class="character" style="left: 30%;">
                <img src="bike_solo.png" alt="Boy" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2280%22%20height%3D%2280%22%3E%3Ccircle%20cx%3D%2240%22%20cy%3D%2240%22%20r%3D%2230%22%20fill%3D%22%23FF1493%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="character" style="left: 70%;">
                <img src="girl.png" alt="Girl" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2280%22%20height%3D%2280%22%3E%3Ccircle%20cx%3D%2240%22%20cy%3D%2240%22%20r%3D%2230%22%20fill%3D%22%23FF69B4%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="dialogue" id="dialogue3">You look gorgeous! Hop on! ü•∞</div>
        </div>

        <!-- SCENE 4: Couple Ride -->
        <div class="scene" data-scene="4" id="scene4">
            <div class="parallax-bg"></div>
            <div class="parallax-floor"></div>
            <div class="character moving" id="char4">
                <img src="couple_bike.png" alt="Couple" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2280%22%20height%3D%2280%22%3E%3Ccircle%20cx%3D%2230%22%20cy%3D%2240%22%20r%3D%2215%22%20fill%3D%22%23FF1493%22%2F%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2240%22%20r%3D%2215%22%20fill%3D%22%23FF69B4%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="dialogue" id="dialogue4">Let's go to our special place! üåπ</div>
        </div>

        <!-- SCENE 5: Park Date -->
        <div class="scene" data-scene="5" id="scene5">
            <div class="parallax-bg"></div>
            <div class="character" id="char5">
                <img src="couple_bench.png" alt="Couple on bench" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2280%22%20height%3D%2280%22%3E%3Crect%20x%3D%2220%22%20y%3D%2250%22%20width%3D%2240%22%20height%3D%2210%22%20fill%3D%22%238B4513%22%2F%3E%3Ccircle%20cx%3D%2235%22%20cy%3D%2240%22%20r%3D%2210%22%20fill%3D%22%23FF1493%22%2F%3E%3Ccircle%20cx%3D%2245%22%20cy%3D%2240%22%20r%3D%2210%22%20fill%3D%22%23FF69B4%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="qr-container" id="qr-code" style="display: none;">
                <div class="qr-box" id="qr-click">
                    <svg viewBox="0 0 100 100">
                        <rect width="100" height="100" fill="white"/>
                        <rect x="10" y="10" width="30" height="30" fill="#FF1493"/>
                        <rect x="60" y="10" width="30" height="30" fill="#FF1493"/>
                        <rect x="10" y="60" width="30" height="30" fill="#FF1493"/>
                        <rect x="60" y="60" width="30" height="30" fill="#FF1493"/>
                    </svg>
                </div>
            </div>
            <div class="dialogue" id="dialogue5">Hey! There's a QR code! Scan it! üì±</div>
        </div>

        <!-- SCENE 6: Phone Scanner -->
        <div class="scene" data-scene="6" id="scene6">
            <div class="phone-scanner">
                <div class="phone-header">üì± Valentine Scanner</div>
                <div class="scanner-area">
                    <div class="scanning-qr">
                        <svg viewBox="0 0 100 100">
                            <rect width="100" height="100" fill="white"/>
                            <rect x="10" y="10" width="30" height="30" fill="#FF1493"/>
                            <rect x="60" y="10" width="30" height="30" fill="#FF1493"/>
                        </svg>
                    </div>
                    <div class="scan-line"></div>
                </div>
                <div class="scanning-text">Scanning...</div>
            </div>
        </div>

        <!-- SCENE 7: Hacker Mask -->
        <div class="scene" data-scene="7" id="scene7">
            <div class="hacker-mask">
                <img src="mask.png" alt="Mask" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22130%22%20height%3D%22130%22%3E%3Ccircle%20cx%3D%2265%22%20cy%3D%2265%22%20r%3D%2250%22%20fill%3D%22%23FF1493%22%2F%3E%3Ccircle%20cx%3D%2245%22%20cy%3D%2255%22%20r%3D%2210%22%20fill%3D%22white%22%2F%3E%3Ccircle%20cx%3D%2285%22%20cy%3D%2255%22%20r%3D%2210%22%20fill%3D%22white%22%2F%3E%3C%2Fsvg%3E'">
            </div>
            <div class="quiz-container" id="quiz-container">
                <div class="question-text" id="question-text">Is your heart beating faster?</div>
                <div class="quiz-buttons">
                    <button class="quiz-btn" id="yes-btn">YES üíù</button>
                    <button class="quiz-btn" id="no-btn">NO üòà</button>
                </div>
            </div>
        </div>

        <!-- SCENE 8: Finale -->
        <div class="scene" data-scene="8" id="scene8">
            <div class="petal-rain" id="petal-rain"></div>
            <div class="teddy-container">
                <img src="teddy.png" alt="Teddy" onerror="this.src='data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22140%22%20height%3D%22140%22%3E%3Ccircle%20cx%3D%2270%22%20cy%3D%2280%22%20r%3D%2240%22%20fill%3D%22%23FF69B4%22%2F%3E%3Ccircle%20cx%3D%2255%22%20cy%3D%2260%22%20r%3D%2210%22%20fill%3D%22%23FF1493%22%2F%3E%3Ccircle%20cx%3D%2285%22%20cy%3D%2260%22%20r%3D%2210%22%20fill%3D%22%23FF1493%22%2F%3E%3C%2Fsvg%3E'">
                <div class="final-message">HAPPY VALENTINE'S DAY</div>
                <div class="final-submessage">You're my forever Valentine!</div>
            </div>
        </div>
    </div>

    <script>
        class ValentineMovie {
            constructor() {
                this.currentScene = 1;
                this.totalScenes = 8;
                this.scenes = document.querySelectorAll('.scene');
                this.dialogues = document.querySelectorAll('.dialogue');
                this.audio = document.getElementById('bg-music');
                this.musicPlaying = false;
                this.parallaxOffset = 0;
                this.parallaxInterval = null;
                this.glitchInterval = null;
                
                this.questions = [
                    "Is your heart beating faster?",
                    "Do you believe in love at first sight?",
                    "Will you be my Valentine forever?"
                ];
                this.currentQuestion = 0;
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.showScene(1);
                this.setupNoButton();
                this.setupAudio();
                
                // Start parallax only for scenes 2 and 4
                setInterval(() => this.updateParallax(), 50);
            }
            
            setupAudio() {
                this.audio.volume = 0.3;
                
                // Try to play on first user interaction
                const playAudio = () => {
                    this.audio.play().then(() => {
                        this.musicPlaying = true;
                        document.getElementById('music-toggle').textContent = 'üîä';
                    }).catch(() => {});
                    document.removeEventListener('touchstart', playAudio);
                    document.removeEventListener('click', playAudio);
                };
                
                document.addEventListener('touchstart', playAudio);
                document.addEventListener('click', playAudio);
                
                document.getElementById('music-toggle').addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (this.musicPlaying) {
                        this.audio.pause();
                        this.musicPlaying = false;
                        document.getElementById('music-toggle').textContent = 'üîà';
                    } else {
                        this.audio.play();
                        this.musicPlaying = true;
                        document.getElementById('music-toggle').textContent = 'üîä';
                    }
                });
            }
            
            setupEventListeners() {
                document.getElementById('prev-scene').addEventListener('click', () => this.prevScene());
                document.getElementById('next-scene').addEventListener('click', () => this.nextScene());
                
                document.getElementById('qr-click')?.addEventListener('click', () => {
                    this.showScene(6);
                    setTimeout(() => this.showScene(7), 2500);
                });
                
                document.getElementById('yes-btn').addEventListener('click', () => {
                    if (this.currentQuestion < this.questions.length - 1) {
                        this.currentQuestion++;
                        document.getElementById('question-text').textContent = this.questions[this.currentQuestion];
                    } else {
                        this.maskExplodeAndFinale();
                    }
                });
                
                document.getElementById('no-btn')?.addEventListener('click', (e) => e.preventDefault());
            }
            
            showScene(sceneNumber) {
                if (sceneNumber < 1 || sceneNumber > this.totalScenes) return;
                
                this.currentScene = sceneNumber;
                
                this.scenes.forEach(scene => scene.classList.remove('active'));
                document.getElementById(`scene${sceneNumber}`).classList.add('active');
                
                this.dialogues.forEach(d => d.classList.remove('show'));
                const dialogue = document.getElementById(`dialogue${sceneNumber}`);
                if (dialogue) dialogue.classList.add('show');
                
                if (sceneNumber === 5) {
                    setTimeout(() => {
                        const qr = document.getElementById('qr-code');
                        if (qr) qr.style.display = 'block';
                    }, 2000);
                }
                
                if (sceneNumber === 7) {
                    this.currentQuestion = 0;
                    document.getElementById('question-text').textContent = this.questions[0];
                }
                
                // Clear previous glitch interval
                if (this.glitchInterval) clearInterval(this.glitchInterval);
            }
            
            updateParallax() {
                if (this.currentScene === 2 || this.currentScene === 4) {
                    this.parallaxOffset -= 1;
                    document.querySelectorAll('.parallax-bg, .parallax-floor').forEach(el => {
                        el.style.transform = `translate3d(${this.parallaxOffset}px, 0, 0)`;
                    });
                }
            }
            
            setupNoButton() {
                const noBtn = document.getElementById('no-btn');
                if (!noBtn) return;
                
                noBtn.addEventListener('mouseover', (e) => this.moveNoButton(e));
                noBtn.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.moveNoButton(e);
                });
            }
            
            moveNoButton(e) {
                const btn = e.target;
                const container = document.getElementById('movie-container');
                const maxX = container.clientWidth - 100;
                const maxY = container.clientHeight - 150;
                btn.style.position = 'absolute';
                btn.style.left = Math.random() * maxX + 'px';
                btn.style.top = Math.random() * maxY + 'px';
            }
            
            maskExplodeAndFinale() {
                const explosion = document.createElement('div');
                explosion.className = 'explosion';
                document.getElementById('movie-container').appendChild(explosion);
                
                document.getElementById('hacker-mask').style.display = 'none';
                document.getElementById('quiz-container').style.display = 'none';
                
                this.startPetalRain();
                
                setTimeout(() => {
                    explosion.remove();
                    this.showScene(8);
                }, 800);
            }
            
            startPetalRain() {
                const container = document.getElementById('petal-rain');
                if (!container) return;
                
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => {
                        const petal = document.createElement('div');
                        petal.className = 'petal';
                        petal.style.left = Math.random() * 100 + '%';
                        petal.style.animationDuration = (Math.random() * 3 + 2) + 's';
                        petal.style.animationDelay = '0s';
                        container.appendChild(petal);
                        setTimeout(() => petal.remove(), 4000);
                    }, i * 50);
                }
            }
            
            nextScene() {
                if (this.currentScene < this.totalScenes) {
                    this.showScene(this.currentScene + 1);
                }
            }
            
            prevScene() {
                if (this.currentScene > 1) {
                    this.showScene(this.currentScene - 1);
                }
            }
        }
        
        // Start immediately
        const movie = new ValentineMovie();
    </script>
</body>
</html>
